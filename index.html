<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Contrôle journalier des camions Abeille rush DNC2</title>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <style>
    body{font-family:Arial, sans-serif;margin:0;padding:20px;background:#f7f7f8}
    .container{max-width:900px;margin:0 auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,0.08)}
    h1{font-size:22px;margin:12px 0;text-align:center}
    form{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    label{display:block;font-size:13px;margin-bottom:6px}
    input[type=text], input[type=number], input[type=date], textarea, select{width:100%;padding:8px;border-radius:8px;border:1px solid #ddd}
    textarea{min-height:70px}
    .full{grid-column:1/-1}
    .btn{background:#1f7adb;color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
    .success{background:#e6ffef;border-left:4px solid #2e7d32;padding:10px;border-radius:6px;margin-top:12px}
    .error{background:#ffe6e6;border-left:4px solid #a94442;padding:10px;border-radius:6px;margin-top:12px;color:#a94442}
    @media (max-width:600px){
      form{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Contrôle journalier des camions Abeille rush DNC2</h1>
    <form id="truckForm">
      <div><label for="date">Date</label><input id="date" name="date" type="date" required></div>

      <div>
        <label for="chauffeur">Chauffeur</label>
        <select id="chauffeur" name="chauffeur" required>
          <option value="">-- Sélectionner un chauffeur --</option>
          <option value="Théo Wasuita">Théo Wasuita</option>
          <option value="Frederik Hoffman">Frederik Hoffman</option>
        </select>
      </div>

      <div>
        <label for="camion">Immatriculation du camion</label>
        <select id="camion" name="camion" required>
          <option value="">-- Sélectionner un camion --</option>
          <option value="HA-510-AS">HA-510-AS</option>
          <option value="HA-518-AW">HA-518-AW</option>
          <option value="HA-256-KQ">HA-256-KQ</option>
        </select>
      </div>

      <div><label for="kmDepart">Km départ</label><input id="kmDepart" name="kmDepart" type="number" required></div>
      <div><label for="kmRetour">Km retour</label><input id="kmRetour" name="kmRetour" type="number"></div>
      <div><label for="carburant">Carburant</label><select id="carburant" name="carburant"><option value="">--</option><option value="OK">OK</option><option value="A vérifier">À vérifier</option></select></div>
      <div><label for="pneus">Pneus</label><select id="pneus" name="pneus"><option value="">--</option><option value="OK">OK</option><option value="A vérifier">À vérifier</option></select></div>
      <div><label for="freins">Freins</label><select id="freins" name="freins"><option value="">--</option><option value="OK">OK</option><option value="A vérifier">À vérifier</option></select></div>
      <div><label for="eclairage">Éclairage</label><select id="eclairage" name="eclairage"><option value="">--</option><option value="OK">OK</option><option value="Défaut">Défaut</option></select></div>
      <div><label for="huile">Niveau huile</label><select id="huile" name="huile"><option value="">--</option><option value="OK">OK</option><option value="Bas">Bas</option></select></div>
      <div class="full"><label for="observations">Observations</label><textarea id="observations" name="observations"></textarea></div>
      <div><label for="signature">Signature chauffeur</label><input id="signature" name="signature" type="text" required></div>
      <div><label for="responsable">Responsable</label><input id="responsable" name="responsable" type="text"></div>
      <div class="full"><button class="btn" type="submit">Envoyer</button><div id="message"></div></div>
    </form>
  </div>

  <script>
    (function(){ 
      emailjs.init("PUeqLFzf8DVPsfpds"); // clé publique
    })();

    const form=document.getElementById('truckForm');
    const msg=document.getElementById('message');

    form.addEventListener('submit',function(e){
      e.preventDefault();
      const formData = {
        date: form.date.value,
        chauffeur: form.chauffeur.value,
        camion: form.camion.value,
        kmDepart: form.kmDepart.value,
        kmRetour: form.kmRetour.value,
        carburant: form.carburant.value,
        pneus: form.pneus.value,
        freins: form.freins.value,
        eclairage: form.eclairage.value,
        huile: form.huile.value,
        observations: form.observations.value,
        signature: form.signature.value,
        responsable: form.responsable.value
      };

      emailjs.send("service_wj64ytl","template_vfr9qvw", formData)
      .then(function(response){
        console.log("EmailJS SUCCESS:", response);
        msg.innerHTML='<div class="success">Formulaire envoyé par email ✅</div>';
        form.reset();
      }, function(error){
        console.error("EmailJS ERROR:", error);
        msg.innerHTML='<div class="error">Erreur EmailJS : '+JSON.stringify(error)+'</div>';
      });
    });
  </script>
</body>
</html>
